<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Armory, Masterwork and the Gatherer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;800&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        /* Base Styles & Color Palette */
        :root {
            --color-background-primary: #0a0a0a;
            --color-background-secondary: #1c1a18;
            --color-background-tertiary: #2a2725;
            --color-text-primary: #f5eadd;
            --color-text-secondary: #b0a89a;
            --color-accent-orange: #ff8c00;
            --color-accent-bronze: #cd7f32;
            --color-accent-green: #1eff00;
            --color-accent-purple: #a335ee;
            --color-border: #4a4a4a;
            --color-quality-poor: #9d9d9d;
            --color-quality-common: #ffffff;
            --color-quality-uncommon: #1eff00;
            --color-quality-rare: #0070dd;
            --color-quality-epic: #a335ee;
            --color-quality-legendary: #ff8000;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--color-background-primary);
            color: var(--color-text-primary);
            background-image: url('https://www.transparenttextures.com/patterns/dark-matter.png');
        }
        
        .font-header {
            font-family: 'Cinzel', serif;
            color: var(--color-accent-orange);
            letter-spacing: 0.05em;
            text-shadow: 1px 1px 2px #000, 0 0 1em #ff8c00, 0 0 0.2em #ff8c00;
        }

        .card {
            background-color: var(--color-background-secondary);
            border: 1px solid var(--color-border);
            border-radius: 0.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), inset 0 1px 2px rgba(0,0,0,0.4);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.8), inset 0 1px 2px rgba(0,0,0,0.4);
        }
        
        .section-header {
            border-bottom: 2px solid var(--color-accent-bronze);
            padding-bottom: 0.75rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px -10px var(--color-accent-bronze);
        }

        /* Wowhead-style Tooltip */
        #tooltip {
            position: absolute;
            display: none;
            padding: 1rem;
            background-color: #0d1217;
            border: 1px solid #5a5a5a;
            border-radius: 4px;
            max-width: 350px;
            font-family: 'Verdana', sans-serif;
            font-size: 13px;
            z-index: 1000;
            pointer-events: none;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .tooltip-name { font-weight: bold; font-size: 14px; }
        .tooltip-stat { color: white; }
        .tooltip-equip, .tooltip-use { color: var(--color-quality-uncommon); }
        .tooltip-flavor { color: var(--color-accent-orange); font-style: italic; }
        .tooltip-set { color: #9d9d9d; }
        .tooltip-set-active { color: var(--color-quality-uncommon); }

        /* Custom Tab Styles */
        .tab-button {
            background-color: var(--color-background-tertiary);
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            transition: all 0.3s ease;
        }
        .tab-button.active, .tab-button:hover {
            background-color: var(--color-accent-bronze);
            color: var(--color-text-primary);
            border-color: var(--color-accent-orange);
            box-shadow: 0 0 15px rgba(255, 140, 0, 0.4);
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* World Event Styles */
        .world-event-card {
            border: 2px solid;
            box-shadow: 0 0 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        .world-event-card::before {
            content: '';
            position: absolute;
            top: 0; right: 0; bottom: 0; left: 0;
            background: linear-gradient(to top, rgba(10,10,10,1) 0%, rgba(10,10,10,0.8) 50%, rgba(10,10,10,0.4) 100%);
            border-radius: 0.375rem; /* match card's rounded corners */
        }
        .world-event-card > * {
            position: relative;
            z-index: 1;
        }
        .world-event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.7), 0 0 30px;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Tooltip Container -->
    <div id="tooltip"></div>

    <!-- Header Navigation -->
    <header class="bg-[var(--color-background-secondary)]/80 backdrop-blur-sm sticky top-0 z-50 shadow-lg border-b border-[var(--color-border)]">
        <nav class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#home" class="font-header text-xl text-white hover:text-[var(--color-accent-orange)] transition-colors"><i class="fas fa-gem mr-2"></i>Professions</a>
            <div class="hidden md:flex space-x-6 text-sm font-semibold">
                <a href="#armory" class="text-[var(--color-text-secondary)] hover:text-white transition-colors"><i class="fas fa-shield-halved mr-1"></i>The Armory</a>
                <a href="#masterwork" class="text-[var(--color-text-secondary)] hover:text-white transition-colors"><i class="fas fa-hammer mr-1"></i>Masterwork Crafting</a>
                <a href="#gathering" class="text-[var(--color-text-secondary)] hover:text-white transition-colors"><i class="fas fa-leaf mr-1"></i>Gathering Refined</a>
                <a href="#world-events" class="text-[var(--color-text-secondary)] hover:text-white transition-colors"><i class="fas fa-globe mr-1"></i>World Events</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-12 md:py-16">

        <!-- Hero Section -->
        <section id="home" class="text-center mb-24 min-h-[60vh] flex flex-col items-center justify-center" style="background: radial-gradient(ellipse at center, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.9) 80%), url('https://i.imgur.com/zdlrTa1.jpeg') top center/cover; border-radius: 0.5rem; border: 1px solid var(--color-border);">
            <h1 class="text-4xl md:text-6xl font-extrabold text-white mb-4 font-header">The Armory, Masterwork and the Gatherer</h1>
            <p class="max-w-4xl mx-auto text-base md:text-lg text-[var(--color-text-primary)] leading-relaxed mb-4">
                This is a fundamental reforging of The Burning Crusade's core systems. We are building upon the legendary foundation to create a deeper, more engaging, and endlessly replayable adventure where your chosen craft is as mighty as your sword or spell.
            </p>
            <p class="max-w-4xl mx-auto text-sm text-[var(--color-text-secondary)] leading-relaxed mb-8">
                Explore a world where artisans are heroes, where gathering is an adventure, and where the items you find and forge tell a story. This is TBC as you remember it, polished to perfection.
            </p>
            <a href="#armory" class="bg-[var(--color-accent-orange)] text-white font-bold py-3 px-8 rounded-md hover:bg-[var(--color-accent-bronze)] transition-all transform hover:scale-105 shadow-lg"><i class="fas fa-arrow-right mr-2"></i>Begin Your Journey</a>
        </section>

        <!-- The Armory Section -->
        <section id="armory" class="mb-24 scroll-mt-20">
            <div class="section-header flex items-center">
                <h2 class="text-3xl md:text-4xl font-header"><i class="fas fa-shield-halved mr-4"></i>The Armory: <span class="text-white">A Revolution in Loot</span></h2>
            </div>
            <div class="card p-6 md:p-8">
                <div class="flex justify-center mb-6">
                    <div id="armory-tabs" class="flex flex-wrap justify-center gap-2 p-1 bg-[var(--color-background-primary)] rounded-lg">
                        <button data-tab="whispering" class="tab-button active py-2 px-4 rounded-md text-sm font-semibold"><i class="fas fa-volume-low mr-2"></i>Whispering Items</button>
                        <button data-tab="artifacts" class="tab-button py-2 px-4 rounded-md text-sm font-semibold"><i class="fas fa-gavel mr-2"></i>Assembled Artifacts</button>
                        <button data-tab="dungeon-sets" class="tab-button py-2 px-4 rounded-md text-sm font-semibold"><i class="fas fa-user-group mr-2"></i>Enhanced Dungeon Sets</button>
                    </div>
                </div>

                <!-- Whispering Items Content -->
                <div id="tab-content-whispering" class="tab-content active">
                    <p class="text-center text-[var(--color-text-secondary)] max-w-3xl mx-auto mb-8">Rare items found across the world that begin with dormant power. As you adventure with them, they awaken, unlocking their true name and powerful new properties.</p>
                    <div id="whispering-items-grid" class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- JS will inject Whispering Items here -->
                    </div>
                </div>
                
                <!-- Assembled Artifacts Content -->
                <div id="tab-content-artifacts" class="tab-content">
                     <p class="text-center text-[var(--color-text-secondary)] max-w-3xl mx-auto mb-8">Legendary power is not for mortals. But through immense effort, you can reassemble echoes of that power into epic artifacts. Combine the original Level 60 Legendary weapon with powerful Level 70 reagents to forge a new, iLvl 125 epic counterpart worthy of an Outland champion.</p>
                     <div id="assembled-artifacts-container" class="space-y-8">
                         <!-- JS will inject Assembled Artifacts here -->
                     </div>
                </div>

                <!-- Enhanced Dungeon Sets Content -->
                <div id="tab-content-dungeon-sets" class="tab-content">
                    <p class="text-center text-[var(--color-text-secondary)] max-w-3xl mx-auto mb-8">Iconic dungeon sets have been revitalized with powerful new 3-piece and 5-piece bonuses, making them compelling pre-raid gearing choices. Complete a challenging quest chain to upgrade your Dungeon Set 2 to a new, epic version.</p>
                    <div id="dungeon-sets-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                        <!-- JS will inject Dungeon Sets here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Masterwork Crafting Section -->
        <section id="masterwork" class="mb-24 scroll-mt-20">
            <div class="section-header flex items-center">
                <h2 class="text-3xl md:text-4xl font-header"><i class="fas fa-hammer mr-4"></i>Masterwork Crafting</h2>
            </div>
            <p class="text-center text-[var(--color-text-secondary)] max-w-4xl mx-auto mb-10 leading-relaxed">Embark on an epic, profession-specific questline to forge a Bind-on-Pickup masterpiece. These journeys will test your skill, taking you across Outland to gather rare components and face mighty foes. Each item represents the pinnacle of your chosen craft.</p>
            <div class="card p-6 md:p-8">
                <div id="masterwork-tabs" class="flex justify-center mb-6">
                     <div class="flex flex-wrap justify-center gap-2 p-1 bg-[var(--color-background-primary)] rounded-lg">
                        <!-- JS will inject Masterwork tabs here -->
                    </div>
                </div>
                <!-- Masterwork Content Panes -->
                <div class="space-y-8">
                    <div id="craft-tab-content-bs" class="tab-content active"></div>
                    <div id="craft-tab-content-lw" class="tab-content"></div>
                    <div id="craft-tab-content-tailor" class="tab-content"></div>
                    <div id="craft-tab-content-alch" class="tab-content"></div>
                    <div id="craft-tab-content-enchant" class="tab-content"></div>
                    <div id="craft-tab-content-jc" class="tab-content"></div>
                    <div id="craft-tab-content-eng" class="tab-content"></div>
                </div>
            </div>
        </section>

        <!-- Gathering Refined Section -->
        <section id="gathering" class="mb-24 scroll-mt-20">
            <div class="section-header flex items-center">
                <h2 class="text-3xl md:text-4xl font-header"><i class="fas fa-leaf mr-4"></i>Gathering Refined</h2>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="card p-6">
                    <h3 class="font-header text-2xl text-[var(--color-accent-bronze)] mb-4">Gathering Glyphs</h3>
                    <p class="text-[var(--color-text-secondary)] mb-6">Discover or craft rare, consumable "Glyphs" that grant powerful, temporary bonuses, turning your farming runs into strategic operations.</p>
                    <div class="space-y-4">
                        <div class="flex items-center gap-4"><img src="https://i.imgur.com/Xv9L0cN.png" class="w-12 h-12 rounded-lg border border-[var(--color-border)]"><p class="text-sm"><b>Glyph of the Seismologist (Mining):</b> Occasionally reveals all mineral veins on the minimap.</p></div>
                        <div class="flex items-center gap-4"><img src="https://i.imgur.com/QfkKke9.png" class="w-12 h-12 rounded-lg border border-[var(--color-border)]"><p class="text-sm"><b>Glyph of the Cultivator (Herbalism):</b> Chance to yield a "Living Seed" to plant and grow more herbs.</p></div>
                        <div class="flex items-center gap-4"><img src="https://i.imgur.com/1ye6OSj.png" class="w-12 h-12 rounded-lg border border-[var(--color-border)]"><p class="text-sm"><b>Glyph of the Trophy Hunter (Skinning):</b> Chance to yield a unique "Trophy" from elite beasts for rewards.</p></div>
                    </div>
                </div>
                <div class="card p-6">
                    <h3 class="font-header text-2xl text-[var(--color-accent-bronze)] mb-4">Node Expertise</h3>
                    <p class="text-[var(--color-text-secondary)]">The more you interact with the world, the more it gives back. Repeatedly gathering a specific type of node (e.g., Fel Iron Ore, Mana Thistle) builds your expertise with it.</p>
                     <ul class="list-disc list-inside text-[var(--color-text-secondary)] mt-6 space-y-2 text-sm">
                        <li><b>Increased Yield:</b> Higher expertise grants a chance to gather extra materials from that node.</li>
                        <li><b>Rare Finds:</b> At high expertise, you have a greater chance of finding rare materials like gems, motes of primal elements, or even BoE patterns.</li>
                        <li><b>Master's Insight:</b> At maximum expertise for a node type, you gain a small, permanent passive buff (e.g., Max Fel Iron Expertise grants +5 Stamina).</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- World Events Section -->
        <section id="world-events" class="scroll-mt-20">
            <div class="section-header flex items-center">
                <h2 class="text-3xl md:text-4xl font-header"><i class="fas fa-globe mr-4"></i>Echoes of Azeroth: <span class="text-white">World Events</span></h2>
            </div>
            <p class="text-center text-[var(--color-text-secondary)] max-w-4xl mx-auto mb-10 leading-relaxed">The world is more alive—and more dangerous—than ever. Dynamic events will reshape the landscape of Outland, offering new challenges and rewards for those brave enough to face them.</p>
            <div id="world-events-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- World events will be injected here by JS -->
            </div>
        </section>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA STORE ---
        const itemDatabase = {
            // Whispering Items
            whisperingCoif: { name: "Whispering Iron-Band Coif", quality: "rare", type: "Mail - Head", stats: ["+15 Stamina", "+12 Strength"], flavor: "It seems to hum with an unheard battle-hymn.", icon: "inv_helmet_08" },
            whisperingCloak: { name: "Whispering Harpy-Feather Cloak", quality: "rare", type: "Back", stats: ["+9 Agility", "+8 Stamina"], flavor: "Each feather seems to remember the sky.", icon: "inv_misc_cape_18" },
            whisperingWand: { name: "Whispering Petrified Wand", quality: "rare", type: "Wand", stats: ["+5 Intellect", "+5 Spirit"], flavor: "An ancient branch, frozen in time.", icon: "inv_wand_06" },
            whisperingGreaves: { name: "Whispering Grave-Dusted Greaves", quality: "rare", type: "Plate Feet", stats: ["+20 Stamina", "+15 Strength"], flavor: "A chill seems to emanate from the metal.", icon: "inv_boots_plate_06" },
            whisperingBelt: { name: "Whispering Prospector's Belt", quality: "rare", type: "Leather Waist", stats: ["+10 Agility", "+10 Stamina"], flavor: "Still smells faintly of dynamite and gold dust.", icon: "inv_belt_11" },
            whisperingRing: { name: "Whispering Smuggler's Ring", quality: "rare", type: "Finger", stats: ["+7 Agility", "+6 Stamina"], flavor: "Grows warm when near treasure.", icon: "inv_jewelry_ring_31" },
            whisperingShield: { name: "Whispering Arakkoa Shield", quality: "epic", type: "Shield", stats: ["+18 Stamina", "+12 Intellect", "+15 Block Value"], flavor: "Covered in cryptic, feathered runes.", icon: "inv_shield_23" },
            whisperingHelm: { name: "Whispering Ethereal Greathelm", quality: "epic", type: "Plate - Head", stats: ["+30 Stamina", "+25 Intellect"], flavor: "Visions of the Twisting Nether cloud your thoughts.", icon: "inv_helmet_81" },
            whisperingGauntlets: { name: "Whispering Fel-Iron Gauntlets", quality: "epic", type: "Plate - Hands", stats: ["+20 Strength", "+22 Stamina", "+15 Defense Rating"], flavor: "They twitch with a faint, malevolent energy.", icon: "inv_gauntlets_63" },
            whisperingBow: { name: "Whispering Zangar-Spore Bow", quality: "epic", type: "Bow", stats: ["+18 Agility", "+12 Stamina"], flavor: "The bowstring is made of a strangely resilient mycelium.", icon: "inv_weapon_bow_08" },
            whisperingMace: { name: "Whispering Crystal-Forged Mace", quality: "epic", type: "One-Hand Mace", stats: ["+25 Stamina", "+20 Strength", "+15 Spell Power"], flavor: "The crystal head pulses with a soft, inner light.", icon: "inv_mace_34" },
            whisperingTrinket: { name: "Whispering Hourglass", quality: "epic", type: "Trinket", flavor: "The sand inside flows both up and down.", icon: "inv_jewelry_trinket_04" },

            // Assembled Artifacts
            tfOriginal: { name: "Thunderfury, Blessed Blade of the Windseeker", quality: "legendary", type: "Legendary Component", flavor: "The legendary sword, dormant and waiting.", icon: "inv_sword_34" },
            tfReagent: { name: "Heart of the Tempest", quality: "epic", type: "Artifact Component", flavor: "The raging heart of an elemental prince, captured from Tempest Keep.", icon: "inv_elemental_primal_air" },
            tfFinal: { name: "Thunderfury, Echo of the Windseeker", quality: "epic", type: "iLvl 125 One-Hand Sword", stats: ["+21 Agility", "+20 Stamina", "+15 Hit Rating"], equip: ["Chance on hit: Blasts your target with lightning, dealing 350 Nature damage and jumping to additional nearby enemies. The primary target is also slowed and has their Nature resistance reduced by 25."], icon: "inv_sword_34" },
            sulfOriginal: { name: "Sulfuras, Hand of Ragnaros", quality: "legendary", type: "Legendary Component", flavor: "The legendary hammer, its fires banked.", icon: "inv_hammer_unique_sulfuras" },
            sulfReagent: { name: "Heart of the Firelord", quality: "epic", type: "Artifact Component", flavor: "The smoldering core of a Dragonkiller, taken from Gruul's Lair.", icon: "inv_elemental_primal_fire" },
            sulfFinal: { name: "Sulfuras, the Extinguished Hand", quality: "epic", type: "iLvl 125 Two-Hand Mace", stats: ["+45 Strength", "+40 Stamina", "+25 Crit Rating"], equip: ["Chance on hit: Hurls a fiery boulder at your enemy, dealing 400-500 Fire damage and leaving a burning patch on the ground."], icon: "inv_hammer_unique_sulfuras" },

            // Dungeon Sets
            dsWarrior: { name: "Aegis of the Unbreakable", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Increases the damage of your Revenge and Shield Slam abilities by 5%.<br>(5) Set: When you block an attack, you have a chance to gain a shield that absorbs 500 damage.", flavor: "Upgrade Quest: <br>1. Collect Fel-Infused Scraps from Heroic Ramparts.<br>2. Defeat Kargath Bladefist in Heroic Shattered Halls.<br>3. Combine the items at the forge in Honor Hold." },
            dsPaladin: { name: "Vestments of Consecrated Light", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Increases the healing of your Holy Light by 5%.<br>(5) Set: Your Judgements have a chance to make your next Flash of Light instant.", flavor: "Upgrade Quest: <br>1. Gather Consecrated Dust from Auchenai Crypts.<br>2. Defeat Murmur in Heroic Shadow Labyrinth.<br>3. Sanctify the set at the Altar of Sha'tar." },
            dsHunter: { name: "Wyrmstalker's Battlegear", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Your Multi-Shot and Aimed Shot have a 10% chance to not trigger a cooldown.<br>(5) Set: Your pet gains a 15% damage bonus for 10 sec after you use Bestial Wrath.", flavor: "Upgrade Quest: <br>1. Collect Primal Feathers from Heroic Sethekk Halls.<br>2. Slay the final beast in the Black Morass.<br>3. Weave the feathers with the aid of a Wildhammer Gryphon Master." },
            dsRogue: { name: "Shrouded Finery of the Unseen", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Increases the duration of your Slice and Dice by 3 sec.<br>(5) Set: Your successful interrupts grant you 20 energy.", flavor: "Upgrade Quest: <br>1. Acquire Ethereal Phase-Dust from Heroic Mana-Tombs.<br>2. Steal the 'Eye of Haramad' from the final boss of the Arcatraz.<br>3. Use the dust to bind the eye's power to your armor." },
            dsPriest: { name: "Raiment of the Penitent Soul", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Increases the duration of your Renew by 3 sec.<br>(5) Set: When your Power Word: Shield is fully consumed, you gain 100 spell power for 8 sec.", flavor: "Upgrade Quest: <br>1. Collect Pure Soul-Shards from Heroic Auchenai Crypts.<br>2. Cleanse the 'Tainted Heart of Murmur' from Shadow Labyrinth.<br>3. Perform a ritual of purification in Shattrath City." },
            dsShaman: { name: "Regalia of the Raging Elements", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Your Lightning Bolt and Chain Lightning have a chance to grant you 75 spell haste rating for 10 sec.<br>(5) Set: When you drop a totem, you gain a shield that absorbs 400 damage.", flavor: "Upgrade Quest: <br>1. Gather Elemental Motes from Heroic Slave Pens.<br>2. Defeat Hydross the Unstable in Serpentshrine Cavern.<br>3. Channel the elements at the Throne of Elements in Nagrand." },
            dsMage: { name: "Threads of the Ley-Line", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Your Arcane Explosion has a 25% chance to be a critical strike.<br>(5) Set: Your Evocation now also restores 10% of your health.", flavor: "Upgrade Quest: <br>1. Collect Ley-Line Residue from Heroic Mana-Tombs.<br>2. Defeat Pathaleon the Calculator in Heroic Mechanar.<br>3. Focus the energies at a Kirin'Var Village focusing crystal." },
            dsWarlock: { name: "Garb of the Fel-Soul", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Your Corruption and Immolate spells have a chance to grant 50 spell damage for 10 sec.<br>(5) Set: When you use Life Tap, your pet is healed for 100% of the health you sacrificed.", flavor: "Upgrade Quest: <br>1. Collect Demonic Essences from Heroic Shadow Labyrinth.<br>2. Obtain the 'Blackened Heart of the Betrayer' from Magtheridon's Lair.<br>3. Bind the essences to your armor at the Hand of Gul'dan." },
            dsDruid: { name: "Wildkin's Embrace", quality: "epic", type: "Dungeon Set Upgrade", set: "(3) Set: Increases the damage of your Starfire and Wrath by 5%.<br>(5) Set: When you shapeshift, you gain 150 Attack Power in Cat Form or 100 Spell Power in Caster Form for 10 sec.", flavor: "Upgrade Quest: <br>1. Gather Untainted Bog-Lichen from Heroic Underbog.<br>2. Defeat the final boss of the Botanica to obtain a 'Living Seed'.<br>3. Plant the seed in a Cenarion moonwell to grow the armor." },

            // Masterwork Rewards
            masterBlade: { name: "Blade of the Master Smith", quality: "epic", type: "Two-Hand Sword", stats: ["+45 Stamina", "+35 Strength", "+22 Critical Strike Rating", "+18 Haste Rating"], equip: ["Chance on hit: Shears reality, dealing 250-350 Shadow damage."] },
            masterDrums: { name: "Drums of the Primal Wild", quality: "epic", type: "Held In Off-hand", stats: ["+25 Stamina", "+28 Agility", "+20 Intellect"], use: ["Summons the Spirit of the Wild to fight for you for 20 sec. The spirit's abilities change based on your LW specialization."] },
            masterMantle: { name: "Mantle of the Master Weaver", quality: "epic", type: "Cloth - Shoulders", stats: ["+28 Stamina", "+33 Intellect", "+25 Spell Crit Rating", "+40 Spell Power"], equip: ["Your damaging spells have a chance to increase your Haste Rating by 120 for 8 sec."] },
            masterStone: { name: "Siren's Tear Alchemist Stone", quality: "epic", type: "Trinket", stats: ["+35 Stamina", "+30 Intellect"], equip: ["Increases healing and spell power by 55."], use: ["Your next potion does not trigger its cooldown. (10 Min Cooldown)"] },
            masterSignet: { name: "Runed Signet of the Arch-Enchanter", quality: "epic", type: "Finger", stats: ["+25 Stamina", "+22 Intellect", "+28 Spell Power"], use: ["Draw upon the ring's power to restore 800 mana. (5 Min Cooldown)"] },
            masterPrism: { name: "Prism of Infinite Facets", quality: "epic", type: "Neck", stats: ["+25 All Stats"], equip: ["Contains one Prismatic Gem socket.", "Socket Bonus: +8 Attack Power and +5 Spell Power"] },
            masterHelm: { name: "Cognition-Enhancing Goggles X-Treme", quality: "epic", type: "Mail - Head", stats: ["+40 Agility", "+35 Stamina", "+28 Intellect", "<Socket: Meta>", "<Socket: Red>"], equip: ["Allows you to track mechanicals and analyze their weaknesses, increasing damage done to them by 3%."] }
        };

        const masterworkDatabase = {
            bs: {
                title: "Blacksmithing",
                lore: "An ancient prophecy speaks of a blade that can cut the fabric of reality, forged not just from metal, but from rage and magic.",
                rewardId: "masterBlade",
                icon: "inv_sword_122",
                tabIcon: "https://i.imgur.com/SwodfOy.png",
                steps: [
                    { title: "The Fel-Touched Core", description: "Obtain the 'Heart of the Forge' from the final boss of the Black Morass and forge it with 20 Fel Iron Bars." },
                    { title: "The Naga's Quench", description: "Defeat Hydross the Unstable in Serpentshrine Cavern and use his pool to quench the 'Unfinished Blade'." },
                    { title: "The Betrayer's Blessing", description: "Bring the 'Tempered Blade' to the Black Temple and survive an encounter with Illidan Stormrage to imbue it with power." }
                ]
            },
            lw: {
                title: "Leatherworking",
                lore: "The true spirit of Outland resides in its great beasts. A master leatherworker can honor their spirits to create drums that call forth the very soul of the wild.",
                rewardId: "masterDrums",
                icon: "inv_misc_drum_07",
                tabIcon: "https://i.imgur.com/BLdT90h.png",
                steps: [
                    { title: "The Perfect Hide", description: "Collect the 'Pristine Hide of the Matriarch' from the oldest Clefthoof in Nagrand." },
                    { title: "The Nether Binding", description: "Obtain 'Nether Drake Scales' from the Netherwing Ledge and cure them using reagents from the final boss of the Mechanar." },
                    { title: "The Spirit's Rhythm", description: "Defeat a summoned spirit beast at the Ancestral Grounds in Nagrand to learn the final pattern." }
                ]
            },
            tailor: {
                title: "Tailoring",
                lore: "The Sunwell was a font of pure magic, and traces of its power linger. A skilled tailor can weave these traces into a mantle of immense power.",
                rewardId: "masterMantle",
                icon: "inv_shoulder_60",
                tabIcon: "https://i.imgur.com/LgkF11h.png",
                steps: [
                    { title: "Sun-Infused Threads", description: "Create 5 Bolts of Primal Mooncloth and take them to the Sun's Reach Sanctum on the Isle of Quel'Danas to be infused." },
                    { title: "The Phoenix's Spark", description: "Obtain a 'Smoldering Ember' from Al'ar in Tempest Keep." },
                    { title: "The Ethereal Loom", description: "Find the hidden Ethereal Loom within the Botanica and use it to weave the final mantle." }
                ]
            },
            alch: {
                title: "Alchemy",
                lore: "The Philosopher's Stone is a myth, but its Outland equivalent is not. A single, perfect tear from a Naga Siren can bend the rules of alchemy.",
                rewardId: "masterStone",
                icon: "https://i.imgur.com/fT5kNia.png",
                tabIcon: "https://i.imgur.com/v9hpB40.png",
                steps: [
                    { title: "The Siren's Lament", description: "Obtain the 'Pristine Siren's Tear' from a rare spawn naga in a hidden corner of Serpentshrine Cavern." },
                    { title: "The Storm's Essence", description: "Collect 10 'Condensed Nether-Storm Essences' during a Nether-Storm world event in Netherstorm." },
                    { title: "The Uncorrupted Transmutation", description: "Find an uncorrupted moonwell in Terokkar Forest and defend it from waves of Shadow Priests while performing the final transmutation." }
                ]
            },
            enchant: {
                title: "Enchanting",
                lore: "Souls are the ultimate currency of power. An Arch-Enchanter can learn to bind a fragment of a powerful soul into an object.",
                rewardId: "masterSignet",
                icon: "inv_jewelry_ring_55",
                tabIcon: "https://i.imgur.com/odvYXLR.png",
                steps: [
                    { title: "The Perfect Vessel", description: "Obtain a 'Powerless Ethereal Band' from the final boss of the Arcatraz." },
                    { title: "The Council's Energy", description: "Charge the ring with the dying energies of the Illidari Council in the Black Temple." },
                    { title: "The Final Binding", description: "Learn the final enchanting word from a captured Eredar sorcerer within Sunwell Plateau by defeating Kalecgos." }
                ]
            },
            jc: {
                title: "Jewelcrafting",
                lore: "Light is power, and a perfect gem can focus it. The quest for the Prism requires a flawless crystal, a Khorium setting, and the heart of a king.",
                rewardId: "masterPrism",
                icon: "inv_jewelry_necklace_77",
                tabIcon: "https://i.imgur.com/YzJ4hr6.png",
                steps: [
                    { title: "The Flawless Crystal", description: "Mine a 'Perfect Nether-Crystal' from a unique node that only spawns after defeating the final boss of the Mana-Tombs." },
                    { title: "The Khorium Setting", description: "Craft a 'Khorium-Bound Setting' using 10 Khorium Bars smelted only in the fires of the Black Temple's forge." },
                    { title: "The Sun King's Heart", description: "Capture a 'Spark of the Sun King' from the death of Kael'thas Sunstrider in Tempest Keep to serve as the necklace's power source." }
                ]
            },
            eng: {
                title: "Engineering",
                lore: "The ultimate tool requires the ultimate knowledge. A master engineer must reverse-engineer technology from three distinct cultures.",
                rewardId: "masterHelm",
                icon: "inv_helmet_59",
                tabIcon: "https://i.imgur.com/jYCLCBA.png",
                steps: [
                    { title: "Draenic Crystal Schematics", description: "Recover 'Naaru Focusing Lens Schematics' from the final boss of the Shattered Halls." },
                    { title: "Ethereal Phasing Tech", description: "Obtain a 'Damaged Phase-Coil' from Pathaleon the Calculator in the Mechanar and repair it." },
                    { title: "The Final Assembly", description: "Combine the components using the Master Engineering workbench in Area 52, which requires 5 Primal Nether to power." }
                ]
            }
        };

        const worldEventsDatabase = [
            { zone: "Hellfire Peninsula", name: "Legion Assault", timer: "35:10", prof: ["Mining: Fel-Tainted veins appear.", "Herbalism: Corrupted Bloodthistle can be gathered."], artwork: "https://warcraft.wiki.gg/images/thumb/3/31/Sons_of_Lothar_at_Honor_Hold.jpg/1200px-Sons_of_Lothar_at_Honor_Hold.jpg?5210c4" },
            { zone: "Hellfire Peninsula", name: "The Great Demolisher", timer: "1:45:00", prof: ["Engineering: Salvage parts from the Demolisher for rare schematics."], artwork: "https://warcraft.wiki.gg/images/thumb/3/31/Sons_of_Lothar_at_Honor_Hold.jpg/1200px-Sons_of_Lothar_at_Honor_Hold.jpg?5210c4" },
            { zone: "Zangarmarsh", name: "Spore-Lash", timer: "15:33", prof: ["Herbalism: Unique, powerful mushrooms bloom.", "Alchemy: Water in the area becomes a potent reagent."], artwork: "https://i.pinimg.com/736x/e2/61/f6/e261f67e8c0f1862281b87717d144d17.jpg" },
            { zone: "Zangarmarsh", name: "Naga Invasion", timer: "55:20", prof: ["Skinning: Naga drop 'Pristine Naga Scales'.", "Fishing: Special pools with unique fish appear."], artwork: "https://i.pinimg.com/736x/e2/61/f6/e261f67e8c0f1862281b87717d144d17.jpg" },
            { zone: "Terokkar Forest", name: "Arakkoa Ritual", timer: "1:12:44", prof: ["Enchanting: Disrupting totems yields 'Shadowy Essences'.", "Tailoring: Arakkoa drop 'Tattered Shadow-Weave Patterns'."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/a/a9/Terokkar_Forest_Concept_Art_Peter_Lee.jpg/revision/latest/scale-to-width-down/1200?cb=20200710175614" },
            { zone: "Terokkar Forest", name: "Ghostly Procession", timer: "Night Only", prof: ["Alchemy: Ectoplasmic residue can be collected.", "Inscription (future): Rare ghostly pigments can be found."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/a/a9/Terokkar_Forest_Concept_Art_Peter_Lee.jpg/revision/latest/scale-to-width-down/1200?cb=20200710175614" },
            { zone: "Nagrand", name: "Fel-Corrupted Zone", timer: "45:13", prof: ["Mining: Fel-Tainted veins appear.", "Herbalism: Corrupted herbs can be gathered."], artwork: "https://warcraft.wiki.gg/images/thumb/8/84/Safe_Haven_-_Nagrand.jpg/1200px-Safe_Haven_-_Nagrand.jpg?4ff4a7" },
            { zone: "Nagrand", name: "The Great Hunt", timer: "1:25:00", prof: ["Skinning: The target beast drops 'Legendary Hide'.", "Leatherworking: Can create special armor kits from the hunt's trophies."], artwork: "https://warcraft.wiki.gg/images/thumb/8/84/Safe_Haven_-_Nagrand.jpg/1200px-Safe_Haven_-_Nagrand.jpg?4ff4a7" },
            { zone: "Blade's Edge Mountains", name: "Gronn Uprising", timer: "2:15:00", prof: ["Mining: Gronn drop 'Unusual Minerals'.", "Blacksmithing: Can learn Gronn-style armor plans."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/c/ca/Blade%27s_Edge_Mountains_Concept_Art_Peter_Lee_1.jpg/revision/latest?cb=20110523170454" },
            { zone: "Blade's Edge Mountains", name: "Crystal Resonance", timer: "48:10", prof: ["Jewelcrafting: Can mine 'Resonating Crystals' for epic gems.", "Enchanting: Can drain energy from crystals for rare shards."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/c/ca/Blade%27s_Edge_Mountains_Concept_Art_Peter_Lee_1.jpg/revision/latest?cb=20110523170454" },
            { zone: "Netherstorm", name: "Nether-Storm", timer: "2:30:00", prof: ["Alchemy: Can collect 'Condensed Nether-Storm Essences'.", "Engineering: Can deploy collectors to gather energy for batteries."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/4/4f/Netherstorm_Concept_Art_Peter_Lee.jpg/revision/latest?cb=20180817001634" },
            { zone: "Netherstorm", name: "Ethereal Trade Fair", timer: "3:00:00", prof: ["All: A rare vendor appears selling unique patterns and reagents."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/4/4f/Netherstorm_Concept_Art_Peter_Lee.jpg/revision/latest?cb=20180817001634" },
            { zone: "Shadowmoon Valley", name: "Fel Eruption", timer: "1:10:00", prof: ["Mining: Fel Volcanoes spawn Adamantite and Khorium.", "Herbalism: Nightmare Vine and Fel Lotus bloom in abundance."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/9/95/Shadowmoon_Valley_Concept_Art_Peter_Lee_1.jpg/revision/latest?cb=20180619195700" },
            { zone: "Shadowmoon Valley", name: "The Hand of Gul'dan", timer: "4:00:00", prof: ["Enchanting: Can create a 'Soul Trap' to capture essences from the elite demons.", "Tailoring: Demons drop 'Fel-Touched Cloth'."], artwork: "https://static.wikia.nocookie.net/wowpedia/images/9/95/Shadowmoon_Valley_Concept_Art_Peter_Lee_1.jpg/revision/latest?cb=20180619195700" }
        ];
        
        const dungeonSetDatabase = [
            { id: 'dsWarrior', name: 'Warrior', icon: 'https://i.imgur.com/seZs5WM.png' },
            { id: 'dsPaladin', name: 'Paladin', icon: 'https://i.imgur.com/tbPW0IM.png' },
            { id: 'dsHunter', name: 'Hunter', icon: 'https://i.imgur.com/En31Y4t.png' },
            { id: 'dsRogue', name: 'Rogue', icon: 'https://i.imgur.com/kQJfCCO.png' },
            { id: 'dsPriest', name: 'Priest', icon: 'https://i.imgur.com/aj1CVrE.png' },
            { id: 'dsShaman', name: 'Shaman', icon: 'https://i.imgur.com/OaLY1Ck.png' },
            { id: 'dsMage', name: 'Mage', icon: 'https://i.imgur.com/qn2djXW.png' },
            { id: 'dsWarlock', name: 'Warlock', icon: 'https://i.imgur.com/MHcMLJx.png' },
            { id: 'dsDruid', name: 'Druid', icon: 'https://i.imgur.com/t9FOweo.png' }
        ];
        
        // --- DYNAMIC CONTENT RENDERING ---

        function renderWhisperingItems() {
            const container = document.getElementById('whispering-items-grid');
            let content = '';
            Object.keys(itemDatabase).filter(k => k.startsWith('whispering')).forEach(key => {
                const item = itemDatabase[key];
                content += `
                    <div class="bg-[var(--color-background-tertiary)] p-4 rounded-lg flex items-center gap-4 border-l-4" style="border-left-color: var(--color-quality-${item.quality})">
                        <img src="https://wow.zamimg.com/images/wow/icons/large/${item.icon}.jpg" alt="${item.name}" class="w-12 h-12 rounded tooltip" data-item-id="${key}">
                        <div>
                            <h4 class="font-bold tooltip" style="color: var(--color-quality-${item.quality})" data-item-id="${key}">${item.name}</h4>
                            <p class="text-xs text-[var(--color-text-secondary)]">${item.type}</p>
                        </div>
                    </div>`;
            });
            container.innerHTML = content;
        }

        function renderAssembledArtifacts() {
            const container = document.getElementById('assembled-artifacts-container');
            const artifacts = [
                { base: 'tfOriginal', reagent: 'tfReagent', final: 'tfFinal', title: 'Thunderfury, Blessed Blade of the Windseeker (Reforged)' },
                { base: 'sulfOriginal', reagent: 'sulfReagent', final: 'sulfFinal', title: 'Sulfuras, Hand of Ragnaros (Reforged)' }
            ];
            let content = '';
            artifacts.forEach(art => {
                const baseItem = itemDatabase[art.base];
                const reagentItem = itemDatabase[art.reagent];
                const finalItem = itemDatabase[art.final];
                content += `
                    <div class="bg-[var(--color-background-tertiary)] p-6 rounded-lg">
                        <h3 class="font-header text-2xl text-center text-[var(--color-quality-epic)] mb-6">${art.title}</h3>
                        <div class="grid md:grid-cols-3 gap-8 items-center">
                            <div class="md:col-span-2 space-y-4">
                                <div class="flex items-center gap-4">
                                    <img src="https://wow.zamimg.com/images/wow/icons/large/${baseItem.icon}.jpg" alt="${baseItem.name}" class="w-12 h-12 rounded tooltip" data-item-id="${art.base}">
                                    <div>
                                        <h4 class="font-bold text-[var(--color-quality-legendary)] tooltip" data-item-id="${art.base}">${baseItem.name}</h4>
                                        <p class="text-xs text-[var(--color-text-secondary)]">The original Level 60 Legendary Weapon</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-4">
                                    <img src="https://wow.zamimg.com/images/wow/icons/large/${reagentItem.icon}.jpg" alt="${reagentItem.name}" class="w-12 h-12 rounded tooltip" data-item-id="${art.reagent}">
                                    <div>
                                        <h4 class="font-bold text-[var(--color-quality-epic)] tooltip" data-item-id="${art.reagent}">${reagentItem.name}</h4>
                                        <p class="text-xs text-[var(--color-text-secondary)]">${reagentItem.flavor}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center">
                                <img src="https://wow.zamimg.com/images/wow/icons/large/${finalItem.icon}.jpg" alt="${finalItem.name}" class="w-24 h-24 rounded-lg mx-auto mb-2 border-2 border-[var(--color-quality-epic)] tooltip" data-item-id="${art.final}">
                                <h4 class="font-bold text-lg text-[var(--color-quality-epic)] tooltip" data-item-id="${art.final}">${finalItem.name}</h4>
                                <p class="text-sm text-[var(--color-text-secondary)]">${finalItem.type}</p>
                            </div>
                        </div>
                    </div>`;
            });
            container.innerHTML = content;
        }

        function renderDungeonSets() {
            const container = document.getElementById('dungeon-sets-grid');
            let content = '';
            dungeonSetDatabase.forEach(set => {
                content += `
                    <a href="#" class="bg-[var(--color-background-tertiary)] p-3 rounded-lg text-center hover:bg-[var(--color-accent-bronze)] transition-colors tooltip" data-item-id="${set.id}">
                        <img src="${set.icon}" class="w-16 h-16 mx-auto rounded">
                        <span class="text-sm font-semibold mt-2 block">${set.name}</span>
                    </a>`;
            });
            container.innerHTML = content;
        }

        function renderMasterworkContent() {
            const tabContainer = document.querySelector('#masterwork-tabs .flex-wrap');
            let tabContent = '';
            Object.keys(masterworkDatabase).forEach((key, index) => {
                const craft = masterworkDatabase[key];
                const item = itemDatabase[craft.rewardId];
                const container = document.getElementById(`craft-tab-content-${key}`);
                
                tabContent += `
                    <button data-craft-tab="${key}" class="tab-button ${index === 0 ? 'active' : ''} py-2 px-4 rounded-md text-sm font-semibold flex items-center gap-2">
                        <img src="${craft.tabIcon}" class="w-5 h-5"/> ${craft.title}
                    </button>`;

                let stepsHtml = craft.steps.map((step, stepIndex) => `
                    <div class="mb-4">
                        <h4 class="font-bold text-lg text-white mb-2"><i class="fas fa-chevron-right text-xs mr-2 text-[var(--color-accent-orange)]"></i>Step ${stepIndex + 1}: ${step.title}</h4>
                        <p class="text-sm text-[var(--color-text-secondary)] pl-6 border-l-2 border-[var(--color-border)]">${step.description}</p>
                    </div>
                `).join('');

                let content = `
                    <div class="grid md:grid-cols-5 gap-8">
                        <div class="md:col-span-3">
                            <h3 class="font-header text-2xl text-[var(--color-accent-bronze)] mb-4">${craft.title}: The ${item.name}</h3>
                            <p class="text-[var(--color-text-secondary)] leading-relaxed mb-6">${craft.lore}</p>
                            ${stepsHtml}
                        </div>
                        <div class="md:col-span-2 text-center flex flex-col items-center justify-center bg-[var(--color-background-tertiary)] p-6 rounded-lg">
                            <p class="font-semibold text-white mb-2">Final Reward:</p>
                            <img src="${craft.icon === 'https://i.imgur.com/fT5kNia.png' ? craft.icon : `https://wow.zamimg.com/images/wow/icons/large/${craft.icon}.jpg`}" class="w-24 h-24 rounded-lg border-2 border-[var(--color-quality-epic)] shadow-lg tooltip" data-item-id="${craft.rewardId}" alt="${item.name}">
                            <p class="mt-2 text-[var(--color-quality-epic)] font-bold tooltip" data-item-id="${craft.rewardId}">${item.name}</p>
                        </div>
                    </div>
                `;
                container.innerHTML = content;
            });
            tabContainer.innerHTML = tabContent;
        }
        
        function renderWorldEvents() {
            const grid = document.getElementById('world-events-grid');
            let content = '';
            worldEventsDatabase.forEach(event => {
                let eventColor;
                if (event.name.includes("Fel") || event.name.includes("Uprising") || event.name.includes("Legion")) eventColor = 'var(--color-accent-green)';
                else if (event.name.includes("Ritual") || event.name.includes("Procession")) eventColor = 'var(--color-accent-purple)';
                else eventColor = 'var(--color-quality-rare)';

                content += `
                    <div class="card world-event-card p-6 text-white" style="--event-color: ${eventColor}; border-color: var(--event-color); box-shadow: 0 0 15px var(--event-color); background-image: url('${event.artwork}');">
                        <h4 class="font-header text-lg mb-1" style="color: var(--event-color)">${event.name}</h4>
                        <p class="text-md font-bold mb-2">${event.zone}</p>
                        <div class="text-2xl font-bold tracking-widest bg-black/50 inline-block px-3 py-1 rounded-md text-sm">${event.timer}</div>
                        <div class="mt-4 text-left text-xs space-y-1">
                            ${event.prof.map(p => `<p><span class="font-bold text-[var(--event-color)]">▶</span> ${p}</p>`).join('')}
                        </div>
                    </div>
                `;
            });
            grid.innerHTML = content;
        }

        // --- INITIALIZE DYNAMIC CONTENT ---
        renderWhisperingItems();
        renderAssembledArtifacts();
        renderDungeonSets();
        renderMasterworkContent();
        renderWorldEvents();
        
        // --- TOOLTIP LOGIC ---
        const tooltip = document.getElementById('tooltip');
        document.body.addEventListener('mousemove', e => {
            if (e.target.closest('.tooltip')) {
                 tooltip.style.left = e.pageX + 15 + 'px';
                 tooltip.style.top = e.pageY + 15 + 'px';
            }
        });
        document.body.addEventListener('mouseover', e => {
            const target = e.target.closest('.tooltip');
            if (target) {
                const itemId = target.dataset.itemId;
                const item = itemDatabase[itemId];
                if (!item) return;
                let content = `<div class="tooltip-name" style="color: var(--color-quality-${item.quality});">${item.name}</div>`;
                if(item.type) content += `<div>${item.type}</div>`;
                if(item.stats) content += `<br>${item.stats.map(stat => `<div class="tooltip-stat">${stat}</div>`).join('')}`;
                if(item.equip) content += `<br>${Array.isArray(item.equip) ? item.equip.map(eq => `<div class="tooltip-equip">Equip: ${eq}</div>`).join('') : `<div class="tooltip-equip">Equip: ${item.equip}</div>`}`;
                if(item.use) content += `<br>${Array.isArray(item.use) ? item.use.map(u => `<div class="tooltip-use">Use: ${u}</div>`).join('') : `<div class="tooltip-use">Use: ${item.use}</div>`}`;
                if(item.set) content += `<br><div class="tooltip-set">${item.set}</div>`;
                if(item.flavor) content += `<br><div class="tooltip-flavor">${item.flavor}</div>`;
                tooltip.innerHTML = content;
                tooltip.style.border = `1px solid var(--color-quality-${item.quality})`;
                tooltip.style.display = 'block';
            }
        });
        document.body.addEventListener('mouseout', e => {
            if (e.target.closest('.tooltip')) {
                tooltip.style.display = 'none';
            }
        });

        // --- TAB LOGIC ---
        function setupTabSystem(tabsContainerId, contentPrefix) {
            const tabContainer = document.getElementById(tabsContainerId);
            if (tabContainer) {
                tabContainer.addEventListener('click', e => {
                    const button = e.target.closest('.tab-button');
                    if (button) {
                        const tabId = button.dataset.craftTab || button.dataset.tab;
                        
                        tabContainer.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');

                        document.querySelectorAll(`[id^="${contentPrefix}"]`).forEach(content => content.classList.remove('active'));
                        document.getElementById(`${contentPrefix}${tabId}`).classList.add('active');
                    }
                });
            }
        }
        
        setupTabSystem('armory-tabs', 'tab-content-');
        setupTabSystem('masterwork-tabs', 'craft-tab-content-');
    });
    </script>
</body>
</html>
